<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sal: /Users/sven/src/sal/sal/logger/file_sink.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sal
   &#160;<span id="projectnumber">0.10.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('file__sink_8hpp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">file_sink.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Logging sink that writes event messages into file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sal/config.hpp&gt;</code><br />
<code>#include &lt;sal/logger/__bits/file_sink.hpp&gt;</code><br />
</div>
<p><a href="file__sink_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a887453b0085a8882e3827cd4ad57c0b3"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__sink_8hpp.html#a887453b0085a8882e3827cd4ad57c0b3">sal::logger::set_file_dir</a> (const std::string &amp;dir)</td></tr>
<tr class="memdesc:a887453b0085a8882e3827cd4ad57c0b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return option to configure file sink directory where logfiles are stored.  <a href="file__sink_8hpp.html#a887453b0085a8882e3827cd4ad57c0b3">More...</a><br /></td></tr>
<tr class="separator:a887453b0085a8882e3827cd4ad57c0b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876afb41081aaec44e50bbfa322cc008"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__sink_8hpp.html#a876afb41081aaec44e50bbfa322cc008">sal::logger::set_file_max_size_mb</a> (size_t size) noexcept</td></tr>
<tr class="memdesc:a876afb41081aaec44e50bbfa322cc008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return options to configure maximum logfile size (in MB).  <a href="file__sink_8hpp.html#a876afb41081aaec44e50bbfa322cc008">More...</a><br /></td></tr>
<tr class="separator:a876afb41081aaec44e50bbfa322cc008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546a473035217a393bf022fa16e131dd"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__sink_8hpp.html#a546a473035217a393bf022fa16e131dd">sal::logger::set_file_buffer_size_kb</a> (size_t size) noexcept</td></tr>
<tr class="memdesc:a546a473035217a393bf022fa16e131dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return option to configure file sink buffering.  <a href="file__sink_8hpp.html#a546a473035217a393bf022fa16e131dd">More...</a><br /></td></tr>
<tr class="separator:a546a473035217a393bf022fa16e131dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037d0dfe4dd60f2acd788455a79c4573"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__sink_8hpp.html#a037d0dfe4dd60f2acd788455a79c4573">sal::logger::set_file_utc_time</a> (bool on) noexcept</td></tr>
<tr class="memdesc:a037d0dfe4dd60f2acd788455a79c4573"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return option to configure whether file sink uses local or UTC time.  <a href="file__sink_8hpp.html#a037d0dfe4dd60f2acd788455a79c4573">More...</a><br /></td></tr>
<tr class="separator:a037d0dfe4dd60f2acd788455a79c4573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e70bb595b86a2ebaa666afa413342b"><td class="memTemplParams" colspan="2">template&lt;typename... Options&gt; </td></tr>
<tr class="memitem:a65e70bb595b86a2ebaa666afa413342b"><td class="memTemplItemLeft" align="right" valign="top">sink_ptr&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="file__sink_8hpp.html#a65e70bb595b86a2ebaa666afa413342b">sal::logger::file</a> (const std::string &amp;label, Options &amp;&amp;...options)</td></tr>
<tr class="memdesc:a65e70bb595b86a2ebaa666afa413342b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create new file sink with <em>label</em> and <em>options</em>.  <a href="file__sink_8hpp.html#a65e70bb595b86a2ebaa666afa413342b">More...</a><br /></td></tr>
<tr class="separator:a65e70bb595b86a2ebaa666afa413342b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Logging sink that writes event messages into file. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="file_a65e70bb595b86a2ebaa666afa413342b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a65e70bb595b86a2ebaa666afa413342b">&#9670;&nbsp;</a></span>file()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename... Options&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">sink_ptr sal::logger::file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Options &amp;&amp;...&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create new file sink with <em>label</em> and <em>options</em>. </p>
<p>Argument <em>label</em> is used to create actual logfile name (in directory configured with <a class="el" href="file__sink_8hpp.html#a887453b0085a8882e3827cd4ad57c0b3" title="Return option to configure file sink directory where logfiles are stored. ">set_file_dir()</a>): </p><div class="fragment"><div class="line">{YYYY}-{MM}-{DD}T{hh}{mm}{ss}_{label}.log</div></div><!-- fragment --><p>Possible <em>options:</em> </p><ul>
<li><a class="el" href="file__sink_8hpp.html#a887453b0085a8882e3827cd4ad57c0b3" title="Return option to configure file sink directory where logfiles are stored. ">set_file_dir()</a>: set directory where logfiles are created</li>
<li><a class="el" href="file__sink_8hpp.html#a876afb41081aaec44e50bbfa322cc008" title="Return options to configure maximum logfile size (in MB). ">set_file_max_size_mb()</a>: maximum single file size (in kB)</li>
<li><a class="el" href="file__sink_8hpp.html#a546a473035217a393bf022fa16e131dd" title="Return option to configure file sink buffering. ">set_file_buffer_size_kb()</a>: configure file buffering</li>
<li><a class="el" href="file__sink_8hpp.html#a037d0dfe4dd60f2acd788455a79c4573" title="Return option to configure whether file sink uses local or UTC time. ">set_file_utc_time()</a>: configure whether to use UTC or local time</li>
</ul>
<p>Logfile is closed and new is started whenever current size reaches configured maximum size. If file already exists with given name and size exceeds maximum size, numeric index will be appended to filename (in range .0 - .999). If sizes of all those files exceed maximum size, filename with index .999 will be forced to use (regardless of it's size)</p>
<p>Also, log file is rotated every midnight (using UTC or local time, depending on how <a class="el" href="file__sink_8hpp.html#a037d0dfe4dd60f2acd788455a79c4573" title="Return option to configure whether file sink uses local or UTC time. ">set_file_utc_time()</a> is set). </p>

</div>
</div>
<a id="file_a546a473035217a393bf022fa16e131dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a546a473035217a393bf022fa16e131dd">&#9670;&nbsp;</a></span>set_file_buffer_size_kb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto sal::logger::set_file_buffer_size_kb </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return option to configure file sink buffering. </p>
<p>If <em>size</em> is zero, event messages are written to file immediately. Otherwise events are temporarily gathered into buffer with <em>size</em> kB and written only when buffer is full.</p>
<p>Buffering improves performance but has certain disadvantages:</p><ul>
<li>performance boost is penalised during buffer flushing</li>
<li>when application crashes, buffer remains unflushed</li>
</ul>
<p>Choose appropriate buffering strategy as required by application. If not set, default is not to buffer.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Catch crash signals and flush buffers. </dd></dl>

</div>
</div>
<a id="file_a887453b0085a8882e3827cd4ad57c0b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a887453b0085a8882e3827cd4ad57c0b3">&#9670;&nbsp;</a></span>set_file_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto sal::logger::set_file_dir </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return option to configure file sink directory where logfiles are stored. </p>
<p>If not configured, default is current working directory. </p>

</div>
</div>
<a id="file_a876afb41081aaec44e50bbfa322cc008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a876afb41081aaec44e50bbfa322cc008">&#9670;&nbsp;</a></span>set_file_max_size_mb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto sal::logger::set_file_max_size_mb </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return options to configure maximum logfile size (in MB). </p>
<p>Whenever <em>size</em> is reached, file sink closes existing file and starts new file. See <a class="el" href="file__sink_8hpp.html#a65e70bb595b86a2ebaa666afa413342b" title="Create new file sink with label and options. ">file()</a> documentation about file naming schema. If not set, max size is not limited. </p>

</div>
</div>
<a id="file_a037d0dfe4dd60f2acd788455a79c4573"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a037d0dfe4dd60f2acd788455a79c4573">&#9670;&nbsp;</a></span>set_file_utc_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto sal::logger::set_file_utc_time </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return option to configure whether file sink uses local or UTC time. </p>
<p>If not set, UTC time is used. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bd06d863670d5f8d05622f532d229dd1.html">sal</a></li><li class="navelem"><a class="el" href="dir_1b828880babf02f792a871b29da8ac9e.html">logger</a></li><li class="navelem"><a class="el" href="file__sink_8hpp.html">file_sink.hpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
