<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sal: sal::logger::sink_t Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sal
   &#160;<span id="projectnumber">0.10.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classsal_1_1logger_1_1sink__t.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="classsal_1_1logger_1_1sink__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sal::logger::sink_t Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Base class for all sinks.  
 <a href="classsal_1_1logger_1_1sink__t.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="sink_8hpp_source.html">sink.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac3e45d91a2ab44d82c2e95a0684a13e3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsal_1_1logger_1_1sink__t.html#ac3e45d91a2ab44d82c2e95a0684a13e3">sink_event_init</a> (<a class="el" href="structsal_1_1logger_1_1event__t.html">event_t</a> &amp;event, const std::string &amp;channel_name)</td></tr>
<tr class="memdesc:ac3e45d91a2ab44d82c2e95a0684a13e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise logging <em>event</em> message.  <a href="#ac3e45d91a2ab44d82c2e95a0684a13e3">More...</a><br /></td></tr>
<tr class="separator:ac3e45d91a2ab44d82c2e95a0684a13e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d18c4c0fcbb655321b480f01701eeb3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsal_1_1logger_1_1sink__t.html#a5d18c4c0fcbb655321b480f01701eeb3">sink_event_write</a> (<a class="el" href="structsal_1_1logger_1_1event__t.html">event_t</a> &amp;event)=0</td></tr>
<tr class="memdesc:a5d18c4c0fcbb655321b480f01701eeb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write <em>event</em> message to actual implementation-specific destination.  <a href="#a5d18c4c0fcbb655321b480f01701eeb3">More...</a><br /></td></tr>
<tr class="separator:a5d18c4c0fcbb655321b480f01701eeb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8be6ee149aa553cbdab492ef4c30ae0f"><td class="memItemLeft" align="right" valign="top"><a id="a8be6ee149aa553cbdab492ef4c30ae0f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsal_1_1logger_1_1sink__t.html#a8be6ee149aa553cbdab492ef4c30ae0f">init</a> (<a class="el" href="structsal_1_1logger_1_1event__t.html">event_t</a> &amp;event, const std::string &amp;channel_name) noexcept</td></tr>
<tr class="memdesc:a8be6ee149aa553cbdab492ef4c30ae0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default implementation for <em><a class="el" href="classsal_1_1logger_1_1sink__t.html#ac3e45d91a2ab44d82c2e95a0684a13e3" title="Initialise logging event message. ">sink_event_init()</a></em> that expect <em>event.time</em> being already initialised. <br /></td></tr>
<tr class="separator:a8be6ee149aa553cbdab492ef4c30ae0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a1aca7e0e71e821a05f91d42c9cbce2df"><td class="memItemLeft" align="right" valign="top"><a id="a1aca7e0e71e821a05f91d42c9cbce2df"></a>
static <a class="el" href="time_8hpp.html#a1daf17475fe5f053e657252671a4a060">time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsal_1_1logger_1_1sink__t.html#a1aca7e0e71e821a05f91d42c9cbce2df">local_now</a> () noexcept</td></tr>
<tr class="memdesc:a1aca7e0e71e821a05f91d42c9cbce2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return time_t, converted to local timezone with DST if turned on. <br /></td></tr>
<tr class="separator:a1aca7e0e71e821a05f91d42c9cbce2df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for all sinks. </p>
<p>Default implementation formats message prefix as: </p><div class="fragment"><div class="line">HH:MM:SS,MSEC\tTHREAD\t[channel]</div></div><!-- fragment --><p> where:</p><ul>
<li>HH:MM:SS,MSEC: current timestamp in GMT</li>
<li>THREAD: logging thread id</li>
<li>[channel]: channel name (if empty, then not printed)</li>
</ul>
<p>Inherited sink could override method(s):</p><ul>
<li><a class="el" href="classsal_1_1logger_1_1sink__t.html#ac3e45d91a2ab44d82c2e95a0684a13e3" title="Initialise logging event message. ">sink_event_init()</a>: do initial event formatting. Called after event is created. Default implementation formats message as described above, using local time.</li>
<li><a class="el" href="classsal_1_1logger_1_1sink__t.html#a5d18c4c0fcbb655321b480f01701eeb3" title="Write event message to actual implementation-specific destination. ">sink_event_write()</a>: do final event formatting and write message to destination. There is no default implementation (pure virtual method)</li>
</ul>
<p>Thread-safety: sinks can be shared between multiple channels and/or workers with following rules:</p><ul>
<li><a class="el" href="classsal_1_1logger_1_1sink__t.html#ac3e45d91a2ab44d82c2e95a0684a13e3" title="Initialise logging event message. ">sink_event_init()</a> is called from any application thread context that sends event to channel i.e. if it has side-effects in sink itself, it is implementation responsibility to handle synchronisation</li>
<li><a class="el" href="classsal_1_1logger_1_1sink__t.html#a5d18c4c0fcbb655321b480f01701eeb3" title="Write event message to actual implementation-specific destination. ">sink_event_write()</a> is called in worker thread context only i.e. no synchronisation is necessary. But, if sink is shared between multiple workers (not recommended), then it might be called from multiple threads, in which case is implementation reponsibility to handle synchronisation </li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac3e45d91a2ab44d82c2e95a0684a13e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e45d91a2ab44d82c2e95a0684a13e3">&#9670;&nbsp;</a></span>sink_event_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void sal::logger::sink_t::sink_event_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsal_1_1logger_1_1event__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>channel_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise logging <em>event</em> message. </p>
<p>This method is called immediately after channel has created <em>event</em>. New implementation can do initial formatting (date/time, channel name, etc). </p>

</div>
</div>
<a id="a5d18c4c0fcbb655321b480f01701eeb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d18c4c0fcbb655321b480f01701eeb3">&#9670;&nbsp;</a></span>sink_event_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void sal::logger::sink_t::sink_event_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsal_1_1logger_1_1event__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write <em>event</em> message to actual implementation-specific destination. </p>
<p>New implementation can also do final formatting if necessary. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>sal</b></li><li class="navelem"><b>logger</b></li><li class="navelem"><a class="el" href="classsal_1_1logger_1_1sink__t.html">sink_t</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
