<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sal: Logger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sal
   &#160;<span id="projectnumber">0.32.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md___users_sven_src_sal_sal_logger__logger.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Logger </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Overview</h1>
<p><a class="el" href="namespacesal_1_1logger.html" title="Logging. ">sal::logger</a> implements very simple logging package. Unlike most logging libraries, it has no levels and logging thresholds. Instead, it uses channel concept. Each channel has own prefix can be independently turned on/off. This approach keeps logging library simpler and same time lets application layer define own levels as necessary. For example, application has <code>auth</code> module. To split log events into prioritised categories, application can define <code>auth.error</code>, <code>auth.info</code> and <code>auth.debug</code> channels.</p>
<p>There are three participants in logging event data flow:</p><ul>
<li><code><a class="el" href="classsal_1_1logger_1_1sink__t.html" title="Base class for all sinks. ">sal::logger::sink_t</a></code>: event message output device (file, console etc).</li>
<li><code><a class="el" href="classsal_1_1logger_1_1channel__t.html" title="Main event logging API. ">sal::logger::channel_t</a></code>: logging destination of grouped events.</li>
<li><code><a class="el" href="classsal_1_1logger_1_1basic__worker__t.html" title="Base class for different worker implementations. ">sal::logger::basic_worker_t</a></code>: maintains lifecycle and mappings between sinks and channels.</li>
</ul>
<h2>Worker (<code><a class="el" href="classsal_1_1logger_1_1basic__worker__t.html" title="Base class for different worker implementations. ">sal::logger::basic_worker_t</a></code>)</h2>
<p>Maintains mapping between channels and sinks. All channels in application are owned by some worker. SAL provides two worker implementations:</p><ul>
<li><code><a class="el" href="classsal_1_1logger_1_1worker__t.html" title="Simple synchronous logger. ">sal::logger::worker_t</a></code>: simple worker that does no allocations and logs event messages to sink in caller thread context. If there is no much logging expected, this is simple and sufficient approach.</li>
<li><code><a class="el" href="classsal_1_1logger_1_1async__worker__t.html" title="Asynchronous logger worker. ">sal::logger::async_worker_t</a></code>: threaded worker. This worker creates thread that spins on event queue. On new event, it's message is written to sink and event record is put into freelist from where next event can reuse it's storage. This worker is recommended for multithreaded applications that might log quite much.</li>
</ul>
<p>Application can instantiate multiple workers for different submodules to distribute logging contention if necessary. Each channel belongs to single worker that created it but sinks can be shared between multiple channels and workers (assuming sink itself has proper internal synchronisation in place).</p>
<h2>Channel (<code><a class="el" href="classsal_1_1logger_1_1channel__t.html" title="Main event logging API. ">sal::logger::channel_t</a></code>)</h2>
<p>Application can create number of channels for it's logging categorising, grouping etc purposes. Each channel is identified by application assigned name. Channels can be independently turned on/off. This is main API for application to check if logging is enabled and create new event record if it is (<a class="el" href="logger_8hpp.html" title="Macros for more convenient logging. ">sal/logger/logger.hpp</a> provides macros for more convenient usage).</p>
<p>For simplicity and thread-safety, channels settings are set during construction and are immutable later except turning enabled flag on/off. Also, once channel is created, there is no methods to remove it again.</p>
<p>Each channel has tied to single sink where it sends it's events.</p>
<h2>Sink (<code><a class="el" href="classsal_1_1logger_1_1sink__t.html" title="Base class for all sinks. ">sal::logger::sink_t</a></code>)</h2>
<p>Sink's responsibility is to do initial event formatting during logging and once message is completed, to write it out to final destination. <code>sink_t</code> itself if abstract base class. Inherited implementations must provide actual writing functionality (for example, <code><a class="el" href="namespacesal_1_1logger.html#a65e70bb595b86a2ebaa666afa413342b" title="Create new file sink with label and options. ">sal::logger::file()</a></code>). Single sink can be shared between multiple channels and/or workers. See class documentation for more information how to handle threading issues when sink is shared between channels that belong to different workers.</p>
<h1>Usage</h1>
<p>Simplest usage with default worker and channel for commmand-line applications that log to console: </p><div class="fragment"><div class="line">sal_print &lt;&lt; &quot;hello, world&quot;;</div></div><!-- fragment --><p>Redirect default logging to different sink (to std::cout in this example): </p><div class="fragment"><div class="line">sal::logger::make_default_worker(</div><div class="line">  sal::logger::set_channel_sink(std::cout)</div><div class="line">);</div><div class="line">sal_print &lt;&lt; &quot;hello, world&quot;;</div></div><!-- fragment --><p>Add new channel to default worker using default settings: </p><div class="fragment"><div class="line">auto channel = sal::logger::default_worker().make_channel(&quot;app&quot;);</div><div class="line">sal_log(channel) &lt;&lt; &quot;hello, world&quot;;</div></div><!-- fragment --><p>Add new channel to default worker using new sink: </p><div class="fragment"><div class="line">auto channel = sal::logger::default_worker().make_channel(&quot;app&quot;,</div><div class="line">  sal::logger::set_channel_sink(std::cout)</div><div class="line">);</div><div class="line">sal_log(channel) &lt;&lt; &quot;hello, world&quot;;</div></div><!-- fragment --><p>Create new worker with default setting for all new channels that do not set own settings: </p><div class="fragment"><div class="line">sal::logger::worker_t worker(</div><div class="line">  sal::logger::set_channel_sink(std::cout)</div><div class="line">);</div><div class="line">auto channel = worker.make_channel(&quot;app&quot;);</div><div class="line">sal_log(channel) &lt;&lt; &quot;hello, world&quot;;</div></div><!-- fragment --><p>Create new worker and add multiple channels with own settings: </p><div class="fragment"><div class="line">sal::logger::worker_t worker;</div><div class="line"></div><div class="line">auto app_info = worker.make_channel(&quot;app.info&quot;,</div><div class="line">  sal::logger::set_channel_sink(std::cout)</div><div class="line">);</div><div class="line">auto app_error = worker.make_channel(&quot;app.error&quot;,</div><div class="line">  sal::logger::set_channel_sink(std::cerr)</div><div class="line">);</div><div class="line"></div><div class="line">sal_log(app_info) &lt;&lt; &quot;app info&quot;;</div><div class="line">sal_log(app_error) &lt;&lt; &quot;app error&quot;;</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
